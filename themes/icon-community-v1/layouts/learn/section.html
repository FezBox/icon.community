{{ define "container" }}
{{ $data := newScratch }}
<div id="container" class="max-w-7xl lg:my-24 px-4 mx-auto my-16">
    {{ partial "page_header.html" (dict "context" . "primaryButtonText" "Subscribe" "primaryButtonUrl" $.Site.Params.social.newsletter_url) }}
    <div id="blog-posts"
        class="md:grid-cols-2 xl:grid-cols-3 md:space-y-0 gap-x-4 gap-y-8 xl:gap-y-8 xl:gap-x-8 grid grid-cols-1">
        {{ range first 12 (where $.Site.RegularPages "Section" "learn") }}
        {{ if isset .Params "author" }}
        {{ $data.Set "authorName" .Params.author }}
        {{ else }}
        {{ $data.Set "authorName" "ICON Foundation" }}
        {{ end }}
        {{ $authorName := $data.Get "authorName" }}
        {{ $authorId := replace (lower ($authorName)) " " "-" }}
        {{ if isset .Params "featured_image" }}
        {{ $data.Set "featuredImage" .Params.featured_image }}
        {{ else }}
        {{ $data.Set "featuredImage" "ICON-FEATURED-IMAGE.png" }}
        {{ end }}
        {{ $featuredImage := $data.Get "featuredImage"}}
        <div class="flex flex-col overflow-hidden rounded-lg">
            <div class="flex-shrink-0">
                <img class="h-60 object-cover w-full" src="/assets/images/featured-images/{{ $featuredImage }}"
                    alt="{{ .Params.description }}">
            </div>
            <div
                class="flex flex-col justify-between flex-1 p-6 border-b border-l border-r border-gray-300 rounded-b-lg">
                <div class="flex-1">
                    {{ with .Params.category }}
                    <p class="text-icon-lo text-sm font-bold">
                        <a href="#" class="hover:underline">
                            {{ . | title }}
                        </a>
                    </p>
                    {{ end }}
                    <a href="{{ .Permalink }}" class="block mt-2">
                        <h2 class="hover:text-icon-lo text-xl font-bold leading-snug">
                            {{ .Title }}
                        </h2>
                        <p class="mt-3 leading-snug text-gray-600">
                            {{ .Params.description }}
                        </p>
                    </a>
                </div>
                <div class="flex items-center mt-6">
                    <div class="flex-shrink-0">
                        <a href="/contributors/">
                            <span class="sr-only"></span>
                            <img class="border-icon-lo w-10 h-10 p-0.5 border-2 rounded-full"
                                src="/assets/images/contributors/{{ $authorId }}.jpg" alt="{{ $authorName }}">
                        </a>
                    </div>
                    <div class="ml-3 text-gray-600">
                        <p class="text-sm font-medium">
                            <a href="/contributors/" class="hover:text-icon-lo">{{ $authorName }}</a>
                        </p>
                        <div class="flex space-x-1 text-sm">
                            <time datetime="2020-03-16">
                                {{ .PublishDate.Format "January 2, 2006" }}
                            </time>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {{ end }}
    </div>
</div>
{{ end }}